!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.toxicDecorators=r.toxicDecorators||{})}(this,function(r){"use strict";function e(r){return void 0===r||null===r}function t(r){return Array.isArray(r)}function n(r){return"function"==typeof r}function o(r){return!!r&&"object"===(void 0===r?"undefined":E(r))&&Object(r)===r&&"[object Object]"===String(r)&&!n(r)&&!t(r)}function i(r){return"number"==typeof r}function u(r){return"string"==typeof r}function a(r){return"boolean"==typeof r}function f(r){return!!r&&("object"===(void 0===r?"undefined":E(r))||"function"==typeof r)&&"function"==typeof r.then}function c(r){return e(r)||a(r)||u(r)||i(r)}function l(r){if(!r||!r.hasOwnProperty)return!1;for(var e=["value","initializer","get","set"],t=0,n=e.length;t<n;t++)if(r.hasOwnProperty(e[t]))return!0;return!1}function s(r){return(n(r.get)||n(r.set))&&a(r.configurable)&&a(r.enumerable)&&void 0===r.writable}function y(r){return n(r.initializer)&&a(r.configurable)&&a(r.enumerable)&&a(r.writable)}function h(r){return function(e){return Object.defineProperty(this,r,{configurable:!0,writable:!0,enumerable:!0,value:e}),e}}function p(r,e){return r.bind?r.bind(e):r.apply?function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.apply(e,n)}:function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.call.apply(r,[e].concat(j(n)))}}function b(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"You must pass me an array of function";if(!t(r)||r.length<1)throw new TypeError(e);if(1===r.length){if(!n(r[0]))throw new TypeError(e);return r[0]}return r.reduce(function(r,t){if(!n(t)||!n(r))throw new TypeError(e);return function(e){return p(t,this)(p(r,this)(e))}})}function g(){var r=console,e=r.warn,t=r.log;if(n(e))return e.apply(void 0,arguments);t.apply(void 0,arguments)}function v(r,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.throwError,a=void 0!==i&&i,f=o.backup;if(u(n)&&(n=n.split(".")),!t(n))throw new TypeError("keys of getDeepProperty must be string or Array<string>");for(var c=[],l=r,s=0,y=n.length;s<y;s++){var h=n[s];if(e(l)){if(a)throw new Error("obj"+(c.length>0?"."+c.join("."):" itself")+" is "+l);return f}l=l[h],c.push(h)}return l}function d(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.get,o=r.set;if(!(n(e)||n(o)||t(e)&&e.length>0||t(o)&&o.length>0))throw new TypeError("@accessor need a getter or setter. If you don't need to add setter/getter. You should remove @accessor");var i="@accessor only accept function or array of function as getter/setter";return e=t(e)?b(e,i):e,o=t(o)?b(o,i):o,function(r,t,i){var u=i.configurable,a=i.enumerable,f=n(e),c=n(o),l=function(r){return f?p(e,this)(r):r},h=function(r){return c?p(o,this)(r):r};if(s(i)){var b=i.get,v=i.set,d=n(b),w=n(v);return!d&&f&&g("You are trying to set getter via @accessor on one property without getter. That's not a good idea."),!w&&c&&g("You are trying to set setter via @accessor on one property without setter. That's not a good idea."),{get:d||f?function(){var r=d?p(b,this)():void 0;return p(l,this)(r)}:void 0,set:w||c?function(r){var e=p(h,this)(r);return w?p(v,this)(e):e}:void 0,configurable:u,enumerable:a}}if(y(i)){var m=i.initializer,A=void 0,E=!1;return{get:function(){var r=p(l,this);return E?r(A):(A=p(m,this)(),E=!0,r(A))},set:function(r){return A=p(h,this)(r)},configurable:u,enumerable:a}}var j=i.value;return{get:function(){return p(l,this)(j)},set:function(r){return j=p(h,o)(r)},configurable:u,enumerable:a}}}function w(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];if(0===e.length)throw new Error("@initialize accept at least one parameter. If you don't need to initialize your value, do not add @initialize.");if(e.length>2&&l(e[2]))throw new Error("You may use @initialize straightly, @initialize return decorators, you need to call it");var n=b(e,"@initialize only accept function parameter");return function(r,e,t){if(s(t)){var o=!1;return d({get:function(r){return o?r:p(n,this)(r)},set:function(r){return o=!0,r}})(r,e,t)}if(y(t)){var i=t.initializer;return{initializer:function(){return p(n,this)(p(i,this)())},configurable:t.configurable,writable:t.writable,enumerable:t.enumerable}}return{value:p(n,this)(t.value),writable:t.writable,configurable:t.configurable,enumerable:t.enumerable}}}function m(r,e,t,n,o){if(void 0!==O(n,o))throw new Error("@alias can't set alias on an existing attribute");P(n,o,{get:function(){return r[e]},set:function(t){return r[e]=t,e},configurable:t.configurable,enumerable:t.enumerable})}function A(r,e){if("undefined"==typeof WeakMap)throw new Error("Using @autobind on "+e.name+"() requires WeakMap support due to its use of super."+e.name+"()");z||(z=new WeakMap),!1===z.has(r)&&z.set(r,new WeakMap);var t=z.get(r);return!1===t.has(e)&&t.set(e,p(e,r)),t.get(e)}var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},j=function(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)},O=("undefined"!=typeof window&&Object.prototype.toString.call(window),function(r){function e(n,i,u){if(t(n)||o(n)){i=i||(o(n)?{}:[]);for(var a in n)i[a]=e(n[a],i[a],a);return i}return r(n,i,u)}}(function(r){return r}),Object.getOwnPropertyDescriptor),P=Object.defineProperty,z=void 0,T=Object.defineProperty,S=Object.getOwnPropertyDescriptor,k=Object.defineProperty;r.accessor=d,r.before=function(){for(var r=arguments.length,e=Array(r),o=0;o<r;o++)e[o]=arguments[o];if(0===e.length)throw new Error("@before accept at least one parameter. If you don't need to preprocess before your function, do not add @before decorators");if(e.length>2&&l(e[2]))throw new Error("You may use @before straightly, @before return decorators, you need to call it");for(var i=e.length-1;i>-1;i--)if(!n(e[i]))throw new TypeError("@before only accept function parameter");return function(r,o,i){var u=i.value,a=i.configurable,f=i.enumerable,c=i.writable;if(!n(u))throw new TypeError("@before can only be used on function");return{value:function(){for(var r=this,n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var a=e.reduce(function(e,n){var o=p(n,r).apply(void 0,j(e));return void 0===o?e:t(o)?o:[o]},o);return p(u,this).apply(void 0,j(a))},configurable:a,enumerable:f,writable:c}}},r.readonly=function(r,e,t){return s(t)?(t.set=void 0,t):(t.writable=!1,t)},r.alias=function(r,e){if(!u(r))throw new TypeError("@alias need a string as a key to find the porperty to set alias on");return function(t,o,i){var u=e&&n(e.hasOwnProperty);if(y(i))return w(function(t){return m(this,o,i,u?e:this,r),t})(t,o,i);if(s(i)){var a=void 0,f=function(t){return a?t:(m(this,o,i,u?e:this,r),a=!0,t)};return d({get:f,set:f})(t,o,i)}return m(t,o,i,u?e:t,r),i}},r.autobind=function(r,e,t){var o=t.value,i=t.configurable;t.enumerable,t.writable;if(!n(o))throw new TypeError("@autobind can only be used on functions, not: "+o+")");var u=r.constructor;return{configurable:i,enumerable:!1,get:function(){var t=this,n=function(){for(var r=arguments.length,e=Array(r),n=0;n<r;n++)e[n]=arguments[n];return o.call.apply(o,[t].concat(j(e)))};return this===r?o:this.constructor!==u&&Object.getPrototypeOf(this).constructor===u?o:this.constructor!==u&&e in this.constructor.prototype?A(this,o):(Object.defineProperty(this,e,{configurable:!0,writable:!0,enumerable:!1,value:n}),n)},set:h(e)}},r.frozen=function(r,e,t){if(t.enumerable=!1,t.configurable=!1,s(t)){var o=t.get;return t.set=void 0,n(o)?{get:function(){var r=p(o,this)();return T(this,e,{value:r,writable:!1,configurable:!1,enumerable:!1}),r},set:void 0,configurable:t.configurable,enumerable:t.enumerable}:void g("You are using @frozen on one accessor descriptor without getter. This property will become a frozen undefined finally.Which maybe meaningless.")}return t.writable=!1,t},r.initialize=w,r.waituntil=function(r,e){if(!n(r)&&!f(r)&&!u(r))throw new TypeError("@waitUntil only accept Function, Promise or String");return function(t,o,i){var u=i.value,a=i.configurable;if(i.enumerable,i.writable,!n(u))throw new TypeError("@waituntil can only be used on function, but not "+u);var s=!1,y=[],h=f(r)?function(){return r}:n(r)?r:function(){var t=r.split("."),n=t.slice(-1),o=c(e)?this:e;if(!s){var i=v(o,t.slice(0,-1)),u=S(i,n),a=function(r){if(!0===r)for(;y.length>0;)y[0](),y.shift();return r},f=l(u)?d({set:a})(i,n,u):d({set:a})(i,n,{value:void 0,configurable:!0,enumerable:!0,writable:!0});k(i,n,f),s=!0}return v(o,t)};return{value:function(){for(var r=this,e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=p(u,this),i=p(h,this).apply(void 0,t);return f(i)?Promise.resolve(i).then(function(){return p(u,r).apply(void 0,t)}):!0===i?p(u,this).apply(void 0,t):s&&new Promise(function(r){y.push(function(){o.apply(void 0,t),r()})})},enumerable:!1,configurable:a,writable:!1}}},r.initString=function(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.unshift(function(r){return u(r)?r:""}),w.apply(void 0,e)},r.initBoolean=function(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.unshift(function(r){return!!a(r)&&r}),w.apply(void 0,e)},r.initArray=function(){for(var r=arguments.length,e=Array(r),n=0;n<r;n++)e[n]=arguments[n];return e.unshift(function(r){return t(r)?r:[]}),w.apply(void 0,e)},r.initNumber=function(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.unshift(function(r){return i(r)?r:0}),w.apply(void 0,e)},r.alwaysArray=function(){for(var r=arguments.length,e=Array(r),n=0;n<r;n++)e[n]=arguments[n];return e.unshift(function(r){return t(r)?r:[]}),d({set:e,get:e})},r.alwaysBoolean=function(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.unshift(function(r){return!!a(r)&&r}),d({set:e,get:e})},r.alwaysNumber=function(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.unshift(function(r){return i(r)?r:0}),d({set:e,get:e})},r.alwaysString=function(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.unshift(function(r){return u(r)?r:""}),d({set:e,get:e})},Object.defineProperty(r,"__esModule",{value:!0})});
